(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20ec34"],{b16e:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{staticClass:"content-header"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-6"},["save"==t.post.actionForm?[a("h1",[t._v("Crear Publicación")])]:[a("h1",[t._v("Editar Producto")]),t._v(" "),a("h5",[t._v(t._s(t.post.title))])]],2),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("ol",{staticClass:"breadcrumb float-sm-right"},[a("li",{staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:{name:"dashboard"}}},[t._v("Dashboard")])],1),t._v(" "),a("li",{staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:{name:"articles-list"}}},[t._v("Productos")])],1),t._v(" "),a("li",{staticClass:"breadcrumb-item active"},[t._v("Nuevo")])])])])])]),t._v(" "),a("loading",{attrs:{active:t.processing,"can-cancel":!1,color:"#007bff"},on:{"update:active":function(e){t.processing=e}}}),t._v(" "),a("section",{staticClass:"content"},[a("b-form",{staticClass:"form form-vertical",on:{submit:function(e){return e.preventDefault(),t.saveItem(e)}}},[a("b-row",{staticClass:"form-body"},[a("b-col",{staticClass:"p-3",attrs:{sm:"12",md:"8",lg:"8",xl:"8"}},[a("b-row",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("b-col",{attrs:{cols:"12"}},[a("b-form-group",[a("label",[t._v("Título (*)")]),t._v(" "),a("b-input-group",{scopedSlots:t._u([{key:"prepend",fn:function(){return[a("b-input-group-text",[a("i",{staticClass:"fa fa-font"})])]},proxy:!0}])},[t._v(" "),a("b-form-input",{attrs:{name:"title",state:t.getStateInput(t.$v.post.title),type:"text"},model:{value:t.$v.post.title.$model,callback:function(e){t.$set(t.$v.post.title,"$model",e)},expression:"$v.post.title.$model"}})],1),t._v(" "),a("b-form-invalid-feedback",{attrs:{state:!(t.$v.post.title.$anyDirty&&!t.$v.post.title.required)}},[t._v("\n\t\t\t\t\t\t\t\t\t\tEl campo debe ser completado\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("b-form-invalid-feedback",{attrs:{state:!(t.$v.post.title.$anyDirty&&!t.$v.post.title.maxLength)}},[t._v("\n\t\t\t\t\t\t\t\t\t\tEl campo debe tener un máximo de 150 carácteres\n\t\t\t\t\t\t\t\t\t")])],1)],1),t._v(" "),a("b-col",{attrs:{sm:"12",md:"12",lg:"12",xl:"12"}},[a("b-form-group",[a("label",[t._v("Vista Previa (*)")]),t._v(" "),a("b-input-group",[a("b-form-textarea",{attrs:{name:"preview",state:t.getStateInput(t.$v.post.preview),placeholder:"Comentarios de Proveedor",rows:"4","max-rows":"8",maxLength:"200"},model:{value:t.$v.post.preview.$model,callback:function(e){t.$set(t.$v.post.preview,"$model",e)},expression:"$v.post.preview.$model"}}),t._v(" "),a("b-form-invalid-feedback",{attrs:{state:!(t.$v.post.preview.$anyDirty&&!t.$v.post.preview.required)}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tEl campo debe ser completado\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("b-form-invalid-feedback",{attrs:{state:!(t.$v.post.preview.$anyDirty&&!t.$v.post.preview.maxLength)}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tEl campo debe tener menos de 200 Carácteres\n\t\t\t\t\t\t\t\t\t\t")])],1)],1)],1),t._v(" "),a("b-col",{attrs:{sm:"12",md:"12",lg:"12",xl:"12"}},[a("b-form-group",[a("label",[t._v("Contenido (*)")])]),t._v(" "),a("jodit-editor",{attrs:{config:t.configEditor,buttons:t.buttonsEditor},model:{value:t.$v.post.content.$model,callback:function(e){t.$set(t.$v.post.content,"$model",e)},expression:"$v.post.content.$model"}}),t._v(" "),a("b-form-invalid-feedback",{attrs:{state:!(t.$v.post.content.$anyDirty&&!t.$v.post.content.required)}},[t._v("\n\t\t\t\t\t\t\t\t\tEl campo debe ser completado\n\t\t\t\t\t\t\t\t")])],1)],1),t._v(" "),a("div",{staticClass:"card-footer"},[a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"outline-primary",disabled:1==t.processing}},[t.processing?t._e():[t._v("\n\t\t\t\t\t\t\t\t\t\tGuardar\n\t\t\t\t\t\t\t\t\t")],t._v(" "),t.processing?[a("i",{staticClass:"fa fa-spinner fa-spin"})]:t._e()],2)],1)])])],1),t._v(" "),a("b-col",{staticClass:"p-3",attrs:{sm:"12",md:"4",lg:"4",xl:"4"}},[a("b-row",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("b-col",{attrs:{cols:"12"}},[a("b-form-group",[a("label",[t._v("Autor (*)")]),t._v(" "),a("b-input-group",[a("b-form-select",{attrs:{state:t.getStateInput(t.$v.post.user_id)},model:{value:t.$v.post.user_id.$model,callback:function(e){t.$set(t.$v.post.user_id,"$model",e)},expression:"$v.post.user_id.$model"}},[t.$v.post.user_id.$anyDirty?t._e():a("b-form-select-option",{attrs:{value:null}},[t._v("-- Seleccionar --")]),t._v(" "),t._l(t.users,(function(e){return a("b-form-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name)+" "+t._s(e.last_name))])}))],2),t._v(" "),a("b-form-invalid-feedback",{attrs:{state:!(t.$v.post.user_id.$anyDirty&&!t.$v.post.user_id.required)}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tDebe seleccionar un Usuario\n\t\t\t\t\t\t\t\t\t\t")])],1)],1)],1),t._v(" "),a("b-col",{attrs:{cols:"12"}},[a("b-form-group",[a("label",[t._v("Visibilidad (*)")]),t._v(" "),a("b-input-group",[a("b-form-select",{attrs:{state:t.getStateInput(t.$v.post.visibility)},model:{value:t.$v.post.visibility.$model,callback:function(e){t.$set(t.$v.post.visibility,"$model",e)},expression:"$v.post.visibility.$model"}},[t.$v.post.visibility.$anyDirty?t._e():a("b-form-select-option",{attrs:{value:null}},[t._v("-- Seleccionar --")]),t._v(" "),a("b-form-select-option",{attrs:{value:"public"}},[t._v("Publico")]),t._v(" "),a("b-form-select-option",{attrs:{value:"private"}},[t._v("Privado")])],1),t._v(" "),a("b-form-invalid-feedback",{attrs:{state:!(t.$v.post.visibility.$anyDirty&&!t.$v.post.visibility.required)}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tDebe seleccionar una opción\n\t\t\t\t\t\t\t\t\t\t")])],1)],1)],1),t._v(" "),a("b-col",{attrs:{sm:"12",md:"12",lg:"12",xl:"12"}},[a("b-form-group",[a("label",[t._v("Fecha (*)")]),t._v(" "),a("b-input-group",{scopedSlots:t._u([{key:"apend",fn:function(){return[a("b-input-group-text")]},proxy:!0}])},[t._v(" "),a("b-form-datepicker",{attrs:{name:"date",locale:"es",placeholder:"No ha seleccionado una fecha válida",state:t.getStateInput(t.$v.post.date)},model:{value:t.$v.post.date.$model,callback:function(e){t.$set(t.$v.post.date,"$model",e)},expression:"$v.post.date.$model"}}),t._v(" "),a("b-form-invalid-feedback",{attrs:{state:!(t.$v.post.date.$anyDirty&&!t.$v.post.date.required)}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tEl campo debe ser completado\n\t\t\t\t\t\t\t\t\t\t")])],1)],1)],1),t._v(" "),a("b-col",{attrs:{cols:"12"}},[a("b-form-group",[a("label",[t._v("Categorias (*) "),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-form-category",modifiers:{"modal-form-category":!0}}],ref:"botton-new-category",attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(e){return t.addComplement("newCategory")}}},[a("i",{staticClass:"fa fa-plus-square"}),t._v(" Crear Nueva")])],1),t._v(" "),a("b-input-group",[a("v-select",{key:"id",staticStyle:{width:"100%"},attrs:{multiple:"",state:t.getStateInput(t.$v.post.categories),options:t.categories,label:"name"},scopedSlots:t._u([{key:"no-options",fn:function(e){var o=e.search,s=e.searching;return[s?[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\tNo hay resultados para "),a("em",[t._v(t._s(o))]),t._v(".\n\t\t\t\t\t\t\t\t\t\t\t\t")]:a("em",{staticStyle:{opacity:"0.5"}},[t._v("Escriba para filtrar.")])]}}]),model:{value:t.$v.post.categories.$model,callback:function(e){t.$set(t.$v.post.categories,"$model",e)},expression:"$v.post.categories.$model"}}),t._v(" "),a("b-form-invalid-feedback",{attrs:{state:!(t.$v.post.categories.$anyDirty&&!t.$v.post.categories.required)}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tDebe seleccionar al menos una categoría\n\t\t\t\t\t\t\t\t\t\t")])],1)],1)],1),t._v(" "),a("b-col",{attrs:{cols:"12"}},[a("b-form-group",[a("label",[t._v("Etiquetas (*) "),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-form-tag",modifiers:{"modal-form-tag":!0}}],ref:"botton-new-tag",attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(e){return t.addComplement("newTag")}}},[a("i",{staticClass:"fa fa-plus-square"}),t._v(" Crear Nueva")])],1),t._v(" "),a("b-input-group",[a("v-select",{key:"id",staticStyle:{width:"100%"},attrs:{multiple:"",state:t.getStateInput(t.$v.post.tags),options:t.tags,label:"name"},scopedSlots:t._u([{key:"no-options",fn:function(e){var o=e.search,s=e.searching;return[s?[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\tNo hay resultados para "),a("em",[t._v(t._s(o))]),t._v(".\n\t\t\t\t\t\t\t\t\t\t\t\t")]:a("em",{staticStyle:{opacity:"0.5"}},[t._v("Escriba para filtrar.")])]}}]),model:{value:t.$v.post.tags.$model,callback:function(e){t.$set(t.$v.post.tags,"$model",e)},expression:"$v.post.tags.$model"}}),t._v(" "),a("b-form-invalid-feedback",{attrs:{state:!(t.$v.post.tags.$anyDirty&&!t.$v.post.tags.required)}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tDebe seleccionar al menos una etiqueta\n\t\t\t\t\t\t\t\t\t\t")])],1)],1)],1),t._v(" "),a("b-col",{attrs:{cols:"12"}},[a("b-form-group",[a("label",[t._v("Permitir Comentarios (*)")]),t._v(" "),a("b-form-radio-group",{attrs:{id:"allow_comments",name:"allow_comments"},model:{value:t.$v.post.allow_comments.$model,callback:function(e){t.$set(t.$v.post.allow_comments,"$model",e)},expression:"$v.post.allow_comments.$model"}},[a("b-form-radio",{attrs:{value:"1"}},[t._v("SI")]),t._v(" "),a("b-form-radio",{attrs:{value:"2"}},[t._v("NO")])],1)],1)],1),t._v(" "),a("b-col",{attrs:{cols:"12"}},[a("b-form-group",[a("label",[t._v("Status (*)")]),t._v(" "),a("b-form-radio-group",{attrs:{id:"status",name:"status"},model:{value:t.$v.post.status.$model,callback:function(e){t.$set(t.$v.post.status,"$model",e)},expression:"$v.post.status.$model"}},[a("b-form-radio",{attrs:{value:"1"}},[t._v("Activo")]),t._v(" "),a("b-form-radio",{attrs:{value:"2"}},[t._v("Inactivo")])],1)],1)],1),t._v(" "),a("b-col",{attrs:{cols:"12"}},[a("b-form-group",[a("label",[t._v("Imagén (*)")]),t._v(" "),a("b-input-group",[a("vue-dropzone",{ref:"main_image",staticStyle:{width:"100%",margin:"0 auto","text-align":"center"},attrs:{id:"main_image",name:"main_image",options:t.dropzoneOptions},on:{"vdropzone-error":t.mainImageError,"vdropzone-success":t.mainImageAddSuccess,"vdropzone-removed-file":function(e){t.$v.post.main_image.$model=null}}}),t._v(" "),a("b-form-invalid-feedback",{attrs:{state:!(t.$v.post.main_image.$anyDirty&&!t.$v.post.main_image.required)}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tLa imagén de la publicación es obligatoria\n\t\t\t\t\t\t\t\t\t\t")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"card-footer"},[a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"outline-primary",disabled:1==t.processing}},[t.processing?t._e():[t._v("\n\t\t\t\t\t\t\t\t\t\tGuardar\n\t\t\t\t\t\t\t\t\t")],t._v(" "),t.processing?[a("i",{staticClass:"fa fa-spinner fa-spin"})]:t._e()],2)],1)])])],1)],1)],1)],1),t._v(" "),a("modal-form-category",{attrs:{category:t.category},on:{"save-success":t.saveItemSuccess}}),t._v(" "),a("modal-form-tag",{attrs:{tag:t.tag},on:{"save-success":t.saveItemSuccess}})],1)},s=[],i=(a("b0c0"),a("5530")),r=a("2f62"),n=a("1dce"),l=a("9062"),c=a.n(l),d=a("4a7a"),m=a.n(d),u=(a("6dfc"),a("e40d"),a("92c3")),v=a.n(u),p=(a("1e3f"),a("b5ae")),g=a("5c25"),b=a("d0d8"),f=(a("425f"),a("69ae")),_=a("9afe"),$=a("7e00"),h={name:"FormBlogPublication",components:{Loading:c.a,"modal-form-category":_["a"],"modal-form-tag":$["a"],"v-select":m.a,vueDropzone:v.a,JoditEditor:f["a"]},data:function(){return{post:{id:"",title:"",slug:"",preview:"",content:"",date:"",visibility:null,status:1,allow_comments:1,user_id:null,categories:[],tags:[],main_image:null},categories:[],tags:[],users:[],category:{name:"",description:"",status:1,actionForm:"save"},tag:{name:"",description:"",status:1,actionForm:"save"},dropzoneOptions:{url:g["b"]+"/upload-image",thumbnailWidth:200,maxFilesize:2,acceptedFiles:"image/png, image/jpg, image/jpeg, image/svg, image/webp",dictDefaultMessage:"<i class='fas fa-upload'></i> Seleccionar Imagén principal",addRemoveLinks:!0,maxFiles:1,paramName:"main_image",dictFileTooBig:"La imagén seleccionada pesa ({{filesize}}MiB). el max. permitido es de: {{maxFilesize}}MiB.",dictInvalidFileType:"Solo se acepta imagenes PNG, JPEG, JPG, SVG",dictRemoveFile:"Eliminar Imagén"},actionComplement:null,configEditor:{minHeight:"550px",maxWidth:"734px",language:"es",uploader:{insertImageAsBase64URI:!0}},buttonsEditor:["source","|","bold","strikethrough","underline","italic","eraser","|","superscript","subscript","|","ul","ol","|","outdent","indent","|","font","fontsize","brush","paragraph","|","image","video","table","link","|","align","undo","redo","selectall","cut","copy","paste","copyformat","|","hr","print","preview","find","|","fullsize"]}},mixins:[n["validationMixin"]],validations:{post:{title:{required:p["required"],maxLength:Object(p["maxLength"])(150)},preview:{required:p["required"],maxLength:Object(p["maxLength"])(250)},content:{required:p["required"]},date:{required:p["required"]},visibility:{required:p["required"]},main_image:{required:p["required"]},status:{required:p["required"]},allow_comments:{required:p["required"]},user_id:{required:p["required"]},categories:{required:p["required"],minLength:Object(p["minLength"])(1)},tags:{required:p["required"],minLength:Object(p["minLength"])(1)}}},created:function(){this.init()},methods:Object(i["a"])(Object(i["a"])({},Object(r["b"])(["getData","saveData","updateData"])),{},{init:function(){this.$v.$reset,this.$v.post.$reset,this.post={title:"",slug:"",preview:"",content:"",date:"",visibility:null,main_image:null,status:1,allow_comments:1,user_id:null,categories:[],tags:[],actionForm:"save"},this.getUsersActivated(),this.getAllCategoriesActivated(),this.getTagsActivated(),this.$v.$reset,this.$v.post.$reset},getStateInput:function(t){return(!t.$anyDirty||!t.$invalid)&&(!(!t.$anyDirty||t.$invalid)||void 0)},getAllCategoriesActivated:function(){var t=this,e="/blog/categories/get-all-activated",a={url:e};this.getData(a).then((function(e){t.categories=e.data})).catch((function(t){console.log(t)}))},getTagsActivated:function(){var t=this,e="/blog/tags/get-all-activated",a={url:e};this.getData(a).then((function(e){t.tags=e.data})).catch((function(t){console.log(t)}))},getUsersActivated:function(){var t=this;this.users=[];var e="/users/get-all-activated",a={url:e};this.getData(a).then((function(e){t.users=e.data})).catch((function(t){console.log(t)}))},addComplement:function(t){this.actionComplement=t,"newCategory"==t?this.category={name:"",description:"",status:1,actionForm:"save"}:"newTag"==t&&(this.tag={name:"",description:"",status:1,actionForm:"save"})},saveItemSuccess:function(t){t.status&&("newCategory"==this.actionComplement?this.categories.push(t):"newTag"==this.actionComplement&&this.tags.push(t)),this.actionComplement=""},mainImageAddSuccess:function(t){this.$v.post.main_image.$model=t,this.$v.post.main_image.$model.type_image=t.type,this.$v.post.main_image.$model.size_image=t.size},mainImageError:function(){return this.$Toast.fire({icon:"error",html:"Error al subir imagén del producto."})},saveItem:function(){var t=this;if(this.$v.post.$touch(),this.$v.post.$anyError)return this.$Toast.fire({icon:"error",title:"Todos los campo (*) deben ser completados para continuar."});console.log(this.post),"save"==this.post.actionForm?this.saveData({url:"/blog/post/save",formData:this.post}).then((function(e){console.log(e),t.$Toast.fire({icon:"success",title:"¡Guardado con éxito!"}),t.post.id=e.data.item.id,t.post.actionForm="update",t.$router.push({name:"blog-post-edit",params:{id:e.data.item.id}})})).catch((function(e){if(console.log(e),"undefined"!=typeof e.response){var a=Object(b["a"])(e.response.data.errors);t.$Toast.fire({icon:"error",html:a})}else t.$Toast.fire({icon:"error",title:"Ah Ocurrido un error inesperado, verifique su conexión a internet y vuelva a intentarlo."})})):this.updateData({url:"/blog/post/update/"+this.post.id,formData:this.post}).then((function(){t.$Toast.fire({icon:"success",title:"¡Guardado con éxito!"}),window.scrollTo(0,0)})).catch((function(e){if(console.log(e),"undefined"!=typeof e.response){var a=Object(b["a"])(e.response.data.errors);t.$Toast.fire({icon:"error",html:a})}else t.$Toast.fire({icon:"error",title:"Ah Ocurrido un error inesperado, verifique su conexión a internet y vuelva a intentarlo."})}))},getArticleById:function(t){var e=this;if(t==this.post.id)this.post.actionForm="update";else{var a="/blog/post/get-by-id/"+t,o={url:a};this.getData(o).then((function(t){e.post=t.data;var a={size:e.post.image_size,name:e.post.image_name,type:e.post.image_type},o=e.post.image_url;e.$refs.main_image.manuallyAddFile(a,o),e.post.main_image=a})).catch((function(t){console.log(t)}))}}}),mounted:function(){"blog-post-edit"==this.$route.name?this.getArticleById(this.$route.params.id):this.init()},computed:Object(i["a"])(Object(i["a"])({},Object(r["c"])({processing:"processingData"})),{},{money:function(){return{decimal:this.shop_options.decimal_separator,thousands:this.shop_options.mile_separator,prefix:this.currency.symbol+" ",suffix:"",precision:parseInt(this.shop_options.decimal_number),masked:!1}}})},y=h,w=a("2877"),x=Object(w["a"])(y,o,s,!1,null,null,null);e["default"]=x.exports}}]);